<% title 'Preparações de Envio' %>

<div class="container">
  <%= link_to new_product_preparation_path, class: 'btn btn-primary' do %> <i class="fas fa-plus"></i> Nova Prepração de Envio <% end %>
  <div class="row">
    <div class="col-12">
      <table class="table table-dark table-hover table-responsive table-bordered table-striped" style="overflow-y: scroll;" id="product_preparations_table">
        <thead>
          <tr>
            <th class="text-center"><i class="fa fa-ellipsis-v"></i></th>
            <th class="text-center"><%= 'Ordem' %></th>
            <th class="text-center" width="700"><%= 'Produtos' %></th>
            <th class="text-center"><%= 'Última atualização' %></th>
          </tr>
        </thead>
        <tbody>
          <% @product_preparations.each do |product_preparation| %>
            <tr>
              <td class="text-center">
                <div class="btn-group" role="group" aria-label="Basic example">
                  <%= link_to edit_product_preparation_path(id: product_preparation.id), class: 'btn btn-light btn-sm text-dark' do %>
                    <i class="fas fa-edit"></i>
                  <% end %>
                  <%= button_to "<i class='fa fa-times'></i>".html_safe, product_preparation_path(product_preparation), data: { confirm: "Are you sure?" }, method: :delete, class: 'btn btn-danger btn-sm text-dark' %>
                </div>
              </td>
              <td class="text-center"><%= product_preparation.description %></td>
              <td class="text-center"><%= PreparationItemsPresenter.new(product_preparation).items %></td>
              <td class="text-center"><%= product_preparation.updated_at.strftime('%d/%m/%Y') %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
<script>
  $(document).ready(function() {
      $('#product_preparations_table').DataTable();
  });

  $('#filters select').on('input', function () {
    $('form#search-form').submit();
  });

</script>

